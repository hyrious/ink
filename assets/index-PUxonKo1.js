const O=(i,t,e)=>i<t?t:i>e?e:i;class l{constructor(t,e){this.x=t,this.y=e}static of(t,e){return new l(t,e)}static from(t){return new l(t.x,t.y)}add(t){return new l(this.x+t.x,this.y+t.y)}subtract(t){return new l(this.x-t.x,this.y-t.y)}multiply(t){return new l(this.x*t,this.y*t)}normalize(t=Math.hypot(this.x,this.y)){return new l(this.x/t,this.y/t)}permutate(){return new l(-this.y,this.x)}negative(){return new l(-this.x,-this.y)}middle(t){return new l((this.x+t.x)/2,(this.y+t.y)/2)}rotate(t,e){const n=Math.sin(e),s=Math.cos(e),r=this.x-t.x,p=this.y-t.y,a=r*s-p*n,h=r*n+p*s;return new l(a+t.x,h+t.y)}dot(t){return this.x*t.x+this.y*t.y}lerp(t,e){return new l(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}project(t,e){return new l(this.x+t.x*e,this.y+t.y*e)}}class U{constructor(){this.value=-1,this.last=-1,this.target=-1}set(t){return this.target=t,this.value<0&&(this.value=t,this.last=t),this}update(t){if(t||(t=.016667),this.value>=0&&this.target>=0&&this.last>=0){let n=this.target-this.value,s=(this.value-this.last)/t,r=.7*n,p=.5*s,a=r-p,h=(s+a)*t;this.last=this.value,Math.abs(h)<.01&&Math.abs(n)<.01?this.value=this.target:this.value+=h}return this.value}}class c{constructor(t,e,n,s){this.x=t,this.y=e,this.p=n,this.t=s}static of(t,e,n,s){return new c(t,e,n,s)}static fromEvent(t){return new c(t.clientX,t.clientY,O(t.pressure||.5,0,1),t.timeStamp)}static fromJSON(t){return new c(t.x,t.y,t.p,t.t)}}class w{constructor(t,e,n,s){this.p=t,this.v=e,this.d=n,this.l=s}static of(t,e,n,s){return new w(t,e,n,s)}static fromJSON(t){return new w(c.fromJSON(t.p),l.from(t.v),t.d,t.l)}}function z(i,t){return t-i.p.t>350?Math.min(i.p.p+.15,1):Math.min(i.p.p+.15*(t-i.p.t)/350,1)}function G(i,t,e){return e-t>350?Math.min(i+.15,1):Math.min(i+.15*(e-t)/350,1)}class S{constructor(t,e=t.length>0?t[t.length-1].l:0){this.points=t,this.length=e,this.segments=[0],this.pending={__proto__:null}}static of(t=[]){let e=new S([],0);for(let n of t)e._push(n);return e._updateSegments(),e}static fromJSON(t){let e=new S(t.points.map(w.fromJSON),t.length);return e.segments=t.segments,e.pending=t.pending,e}get empty(){return this.length==0}get dot(){return this.points.length==1}insert(t,e){if(t==this.points.length){for(let n of e)this._push(n);t=this.points.length,(e=this.pending[t])?(delete this.pending[t],this.insert(t,e)):this._updateSegments()}else if(t>this.points.length)this.pending[t]=e;else throw new RangeError(`Position ${t} conflicts with existing points`);return this}push(t){return this._push(t),this._updateSegments(),this}_push(t){let e=this.points;if(e.length>0){let n=e[e.length-1],s=Math.hypot(t.x-n.p.x,t.y-n.p.y);if(this._updateLength(s),this.length-n.l<4){n.p.p=Math.max(n.p.p,t.p);return}e.push(w.of(t,l.from(t).subtract(n.p).normalize(),s,this.length))}else e.push(w.of(t,l.of(0,0),0,0))}isSpreading(t=performance.now()){return this.points.length>0&&t-this.points[this.points.length-1].p.t<350}outline(t,e,n=performance.now()){let s=this.segments.find(p=>t<p),r=this.points.slice(t>0?t-1:t,s);if(r.length>1){let p=[],a=[],h=r.length,M=e,v=r[0].p.p,C=!0,P=0,T=new U;if(s==null&&h>=2){let o=r[h-2];(o.p.p==.5||o.p.p==1)&&o.d>.4*e&&(C=!1)}for(let o=0;o<h;o++){let{p:d,v:$,d:E}=r[o];o==0&&(E=0,$=r[1].v);let y=Math.min(1,E/e),Y=Math.min(1,1-y),m=Math.min(1,v+(Y-v)*(y*.7)),A=(o<h-1?r[o+1]:r[o]).v,q=o<h-1?$.dot(A):1;m=T.set(m).update(P&&(d.t-P)/1e3),C||(o==h-1&&(m=.05),o==h-2&&(m=Math.max(.1,m-.2)),o==h-3&&(m=Math.max(.1,m-.1))),M=O(e*.5*G(m,d.t,n),.75,e/2);let D=A.lerp($,q).permutate().multiply(M),B=l.from(d).subtract(D),Q=l.from(d).add(D);p.push(B),a.push(Q),P=d.t,v=d.p}let N=[],X=a[0],k=[];for(let o=1/13,d=0;d<=1;d+=o)N.push(X.rotate(r[0].p,3.1416926535897933*d));if(C){let o=r[h-1],d=o.v.negative().permutate(),$=l.from(o.p).project(d,M);for(let E=1/13,y=0;y<1;y+=E)k.push($.rotate(o.p,3.1416926535897933*y))}return p.concat(k,a.reverse(),N)}else if(r.length==1){let p=r[0],a=l.from(p.p).project(l.of(1,0),e*.36*z(p,n)),h=[];for(let M=1/13,v=0;v<=2;v+=M)h.push(a.rotate(p.p,3.1416926535897933*v));return h}else return[]}stroke(t=this.points.map(e=>e.p)){let e=t.length;if(e==0)return"";let n=t[0],s=`M${n.x.toFixed(2)},${n.y.toFixed(2)}`;for(let r=1;r<e;r++){let p=t[r],a=l.from(n).middle(p);r==1?s+=`L${a.x.toFixed(2)},${a.y.toFixed(2)}`:s+=`Q${n.x.toFixed(2)},${n.y.toFixed(2)} ${a.x.toFixed(2)},${a.y.toFixed(2)}`,n=p}return e>1&&(s+=`L${n.x.toFixed(2)},${n.y.toFixed(2)}`),s}_updateLength(t){this.length+=t}_updateSegments(){let t=this.segments,e=this.points,n=e.length;for(let s=t[t.length-1]+1;s<n;s++)e[s].v.dot(e[s-1].v)<0&&(t.push(s),s++)}}let H=document.getElementById("app"),u=H.appendChild(document.createElementNS("http://www.w3.org/2000/svg","svg"));u.setAttribute("fill-rule","nonzero");u.setAttribute("fill","currentColor");u.style.cssText=`display: block; width: 100%; height: 100%;
font-size: 0; touch-action: none; position: relative; contain: content;
overflow: hidden; overscroll-behavior: none;`;let g=new Map;u.onpointerdown=i=>{let t=i.pointerId;g.has(t)&&J(t),g.set(t,i),i.preventDefault(),i.stopPropagation(),u.setPointerCapture(t),K(t,c.fromEvent(i))};u.onpointermove=i=>{let t=i.pointerId;if(i.preventDefault(),i.stopPropagation(),g.has(t)){let e=g.get(t);if(e.clientX===i.clientX&&e.clientY===i.clientY)return;if(g.set(t,i),i.getCoalescedEvents)for(let n of i.getCoalescedEvents())b(t,c.fromEvent(n));else b(t,c.fromEvent(i))}};u.onpointerup=u.onpointerout=i=>{let t=i.pointerId;if(i.preventDefault(),i.stopPropagation(),g.has(t)){if(i.getPredictedEvents){let e=g.get(t).getPredictedEvents()[0];e&&b(t,c.fromEvent(e))}W(t),g.delete(t)}};u.onpointercancel=i=>{let t=i.pointerId;i.preventDefault(),i.stopPropagation(),g.has(t)&&(J(t),g.delete(t))};u.ontouchstart=u.ontouchmove=u.ontouchend=u.ontouchcancel=i=>{i.preventDefault(),i.stopPropagation()};let f={},x={},K=(i,t)=>{let e=S.of([t]),n=u.appendChild(document.createElementNS("http://www.w3.org/2000/svg","path"));n.style.pointerEvents="none",f[i]=[e,n],x[i]=!0,F()},b=(i,t)=>{f[i]&&(f[i][0].push(t),x[i]=!0,F())},J=i=>{f[i]&&(f[i][1].remove(),delete f[i],delete x[i])},W=i=>{if(f[i]){let[t,e]=f[i];t.empty&&e.remove(),F(),delete x[i],L()}},Z=12,F=()=>{for(let i in x){if(f[i]){let[t,e]=f[i],n="";for(let s of t.segments){let r=t.outline(s,Z);n+=t.stroke(r)}e.setAttribute("d",n)}delete x[i]}},I=0,L=()=>{cancelAnimationFrame(I),I=requestAnimationFrame(R)},R=()=>{F();let i=!1;for(let t in f)f[t][0].isSpreading()?(x[t]=!0,i=!0):delete f[t];i&&L()};
//# sourceMappingURL=index-PUxonKo1.js.map
